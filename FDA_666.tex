\documentclass[12pt,letterpaper]{article}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amstext}
\usepackage{listings}
\usepackage{xcolor}
\lstset{
    numbers=left, 
    numberstyle= \tiny, 
    keywordstyle= \color{ blue!80},
    commentstyle= \color{red!50!green!50!blue!50}, 
    frame=shadowbox, % 阴影效果
    rulesepcolor= \color{ red!20!green!20!blue!20} ,
    escapeinside=``, % 英文分号中可写入中文
    xleftmargin=2.2em,xrightmargin=0.5em, aboveskip=1em,
    framexleftmargin=2em
} 
\setlength{\topmargin}{-.4in}
\setlength{\textheight}{9in}
\setlength{\oddsidemargin}{.125in}
\setlength{\textwidth}{6.25in}
\usepackage{graphicx}
\usepackage{color}
\newcommand{\blue}{\color{blue}}
\newcommand{\red}{\color{red}}

\begin{document}

\title{\textbf{\Large Financial Data Analysis}}
\author{Qing Lou, Qianqian Huang, Luyao Gao, Chunlin Liu}
\date{}
\maketiitle 

\thispagestyle{empty}
\tableofcontents

\newpage
\clearpage





\section{Introduction}

Real estate economics is gradually becoming an irreplaceable facet of social topic in metropolis. 
The captivate of the preemption of real estate is a double-edged sword that not only polarizes the rich and the poor, but also contains the incentives of the middle-class people of having house possession.
One preponderant element of this trading is the house price, while the much latent compounds lying behind it could be the mortgage rate of this particular kind of housing loan.
We are considering the mortgage rate in that the central government execute the management control system of the monetary market though various policy tool, the mortgage rate occupies an important position.
The common sense makes it possible that the influence of the mortgage rate on the housing price is undeniable, but we still curious about the range of this effect.

In our analysis of the relationship between the housing price index and mortgage rate, the Autoregressive (AR) model fits the data by the order 12. 
Although this recognizable 12 provides no evidence to quarrel with, the Autoregressive Integrated Moving Average (ARIMA) Model illustrates the connection by more explanatory variables, especially the one from the error term in AR model.
Also, the General Autoregressive conditional heteroskedasticity (GARCH) model is used, but it does not yield the significance contribution on data fitting.

The analysis of the dataset of housing price index and mortgage rate provides a good estimation process to their relationship. 
They are negatively related, and we has given the linear model as the most efficient and simplest model.

\section{Literature Review}
In recent years, the housing price and the lending rate have gained many people’s attention. Researchers study them and want to find the relationship between these two index.
The brief definition of housing price index(HPI) is the price changes of residential housing. Lending rate ,also called the mortgage rate is the rate of interest charged on a mortgage. Mortgage rates are determined by the lender in most cases.
Since the 1970s of last century, the relationship between housing price and mortgage rate has drawn many real estate researchers’ attention in aboard. In a paper called MORTGAGE RATE BUYDOWNS: IMPLICATIONS FOR HOUSING PRICE INDEXES (VB Agarwal RA Phillips,Social Science Quarterly, 1984 , 65 (3) :868-875) using FHA-VA transaction to show that the prices of buydown homes tend to be elevated as compared to other properties, and the housing price index are likely to be distorted with the influence of mortgage rate. 
In paper Do lower mortgage rates mean higher housing prices? (JAMES M. MCGIBANY* and FARROKH NOURZAD, Applied Economics, 2004 , 36 (4) :305-313) analyzes the housing price index and mortgage rate in both long run and short run, compared with each other finds that in long run they have a negative relationship, but in short run there is no influence from mortgage rate to housing price index. 
The previous research give us a brief idea that we want to analyze the long run HPI and mortgage rate with real estate.
Relationship between Hong Kong house prices and mortgage flows (RYC Tse, Journal of Property Finance, 1996 , 7 (4) :54-63)  indicates the price for housing units in Hong Kong is distorted by mortgage constraint, any changes house prices will have a feedback on mortgage lending, and thus tend to iron out the housing demand. 
The data in Visually shows the mortgage rate and housing price in Canada. Home price in Toronto rose $5.4\%$ in 2013 and the mortgage rate fallen to historical lows $<3\%$. This data told us the negative relationship between HPI and Mortgage rate in Canada.
However in US, one of the world biggest real estate trade market, the relationship of these two index may have a more remarkable result.So we decide to analyze HPI and mortgage rate in US during recent 30 years using ARMA, ARIMA and GRACH model.


\section{Data source and data description}
\subsection{Data source}
The data we choose are US National Housing Price Index with a base of 100 in 1975 and 30-Year Conventional MortgageRate(DISCONTINUED). 
We download the two data from the website ``FRED'' which is free. 
Both of the two data are monthly recorded and not seasonly adjusted. 
We use monthly-based data mainly because two reason: the first one is that we want to make our sample big enough to assure the accuracy of our estimated results; the other one is that we  want to find the monthly characteristic of our data by ARIMA model and that is also why we choose the data which is not seasonal adjusted.
The time span of our sample data is during 1975.Jan. and 2016.Sep. which is the only period we could find that contains both the two types of data.

{\footnotesize
\begin{lstlisting}[language=R]
library(readxl)
data <- read_excel("data.xlsx")
head(data)
    v1 v2 v3    v4   v5
1 1975  1  1 25.25 9.43
2 1975  2  1 25.29 9.11
3 1975  3  1 25.36 8.90
4 1975  4  1 25.40 8.82
5 1975  5  1 25.48 8.91
6 1975  6  1 25.46 8.89
\end{lstlisting}
}

\subsection{Data description}
We download the data from FRED by excel form. One is about US National Housing Price Index and the other one is 30-Year Conventional MortgageRate(DISCONTINUED).
We combine the excel into one in order to make the process of importing data more easily.Therefore, there are 501 rows and 5 columns contained in the final data excel.
The 501 rows represent the 501 different months we contained in our sample, from 1975.Jan to 2016.Sep.
The first column represents YEAR, the second is MONTH and the third is DATE.
The fourth column is the data of US National Housing Price Index Value and the last one is of 30-Year Conventional MortgageRate(DISCONTINUED), which we use v4 and v5 to stand for the two columns in our code.
We did some basic analysis for the data as followed:

{\footnotesize
\begin{lstlisting}[language=R]
hpi=data$v4 % US National Housing Price Index Value
mort=data$V5 % 30-Year Conventional MortgageRate
summary(hpi)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  25.25   55.72   81.66   97.76  144.00  184.60 
summary(mort)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  3.350   5.970   7.910   8.294  10.080  18.450
\end{lstlisting}
}
         
\section{Model Specification}
\subsection{Autoregressive model}
An autoregressive (AR) model describes the time-varying processes of some specific variables, and it focus especially on the relationship among the localized data, always the data before time $t$. 
Intuitively speaking, given a time series data $ \{x_i\}$, for each $x_t$, we believe that $x_{t-1}$, $x_{t-2}$, $x_{t-3}$ $\dots$ have the predictive power that can somewhat explain main portion of $x_t$ as an linear combination.
Also, AR model contains a white noise series, or a stochastic term that can be imperfectly predicted.
And with the time variant assumption, $x_t$ has a statistically significant lag-n autocorrelation, the lagged value $x_{t-1}$ might be the most powerful explanatory variable.
In the model specification, R program helps us with the order that has significant influence on our AR regression.

{\footnotesize
\begin{lstlisting}[language=R]
> m1=ar(dhpi,method="mle")
> m1$order
[1] 12
\end{lstlisting}
}

And AR(12) is used in our model:
\begin{equation}
\begin{aligned}
(1-\phi_1B+\phi_2B^2+ \cdots + \phi_{12}B^{12})x_t=a_t.
\end{aligned}
\end{equation}

\subsection{Autoregressive Integrated Moving Average model}
An autoregressive integrated moving average (ARIMA) model provide a parsimonious description of stochastic process. 
The AR part is regressed on its own lagged, the (moving average) MA part is a linear combination of lagged error term occurring contemporaneously, the I part illustrates the difference of the value and their previous value. 
One leading transmutation of ARIMA cut down the burdensome variables used in AR model and MA models, but it still adequate to simulate the data with dynamic structure in our analysis.
With the spurn of high order model, some insignificant terms can be removed, the number of parameters used is sharply reduced, and the structure of the estimating model becomes parsimony.
Also, as the model comprise three frames, these features should fit the data as well as possible, and we are expecting that the ARIMA model would afford a better interpretation for the inter-connection of housing price index.

{\footnotesize
\begin{lstlisting}[language=R]
> tsdhpi=ts(dhpi)
> auto.arima(tsdhpi)
Series: tsdhpi 
ARIMA(5,0,4) with non-zero mean 
sigma^2 estimated as 0.06933:  log likelihood=-39.09
AIC=100.18   AICc=100.72   BIC=146.54
> m4=arima(dhpi,order = c(5,1,4))
> m4
Call:
arima(x = dhpi, order = c(5, 1, 4))
sigma^2 estimated as 0.04959:  log likelihood = 39.46,  
aic = -58.93
\end{lstlisting}
}

This time we are using the ARIMA(5,1,4):
\begin{equation}
\begin{aligned}
(1-\phi_1B+\phi_2B^2-\phi_3B^3-\phi_4B^4+\phi_5B^5)x_t \\
= a_t -\theta_1 a_{t-1}+\theta_2a_{t-2}-\theta_3a_{t-3}+\theta_4a_{t-4}.
\end{aligned}
\end{equation}

\subsection{General Autoregressive conditional heteroskedasticity model}
First, if an autoregressive moving average model (ARMA) model is assumed for the error variance, the model is a generalized autoregressive conditional heteroscedasticity (GARCH) model.
Second, if we look at the basic autoregressive conditional heteroskedasticity (ARCH) model, the variance of the current term is a function of the pervious time series' error term. 
The assumption of the time series data is serially uncorrelated but they are dependent, this time variant data is split into a stochastic piece which is a strong white noise and a time-dependent standard deviation.
And in the GARCH ($p,q$) model, $p$ indicates the order of $\sigma^2$, $q$ indicates the order of the stochastic series.
One thing needs to mention is that the model is highly relevant in volatility modeling, which means the GARCH model is the best method to test the volatility, for now.
The tail distribution of GARCH is heavier than normal, but it still provides a simple parametric function that can be used to describe the volatility evolution. 


\section{Empirical Results}
In this section, we apply the proposed estimation method to the housing price index and mortgage rate to demonstrate its fitness. 
In the empirical, we target at investigating following question. 
(1) How effective is the proposed method? 
(2) How consilient does the representing formulation describe the data relaitonship? 

First, let's take a look at the inter-correlation within the housing price index. 
The left picture of figure 1 provides a strong evidence for the trending of this time variant data, we can mainly predicate that this is an unit root process, and it is also stationary. 
The right picture of figure 1 is the ACF after we have make one difference on the data, it is so clearly that the differenced data has seasonal adjusting, and about 12 months as a cycle.
That makes sense to us because this 12 months' cycle reflects indirectly the varying of one year's preference for the housing. 

\begin{figure*}[h!]
\begin{subfigure}[b]{0.4\textwidth}
\begin{center}
 \includegraphics[scale=0.5]{6}
 \vspace{-0.4cm}
\end{center}
\end{subfigure}
\qquad 
\qquad
\begin{subfigure}[b]{0.4\textwidth}
\begin{center}
 \includegraphics[scale=0.5]{8}
 \vspace{-0.4cm}
\end{center}
\end{subfigure}
 \vspace{-0.4cm}
 \caption{ ACF and PACF of housing price index fitted from 1975. Jan to 2016. Sep.}
      \label{fig:time}
\vspace{-.25cm}
\end{figure*}

Then we have the sense that we can try the AR(12) model with being differentiate for once.
From the code, we see 11 of the 12 coefficient is significant, and the aic is small, so we cannot deny that model is a good fit for our data.
And the model is:
 \begin{equation}
\begin{aligned}
(1-1.234B+0.283B^2+ \cdots + 0.233B^{12})x_t=a_t.
\end{aligned}
\end{equation}

{\footnotesize
\begin{lstlisting}[language=R]
> m2=arima(hpi,order=c(12,1,0))  
> m2
Call:
arima(x = hpi, order = c(12,1,0))
Coefficients:
         ar1      ar2      ar3     ar4      ar5      ar6     ar7     
      1.2343  -0.2827  -0.3300  0.3316  -0.0762  -0.1727  0.1563  
s.e.  0.0434   0.0687   0.0696  0.0710   0.0725   0.0725  0.0724  
         ar8      ar9     ar10    ar11     ar12
      0.0020  -0.0972   0.1159  0.3202  -0.2325
s.e.  0.0729   0.0713   0.0698  0.0689   0.0436
sigma^2 estimated as 0.04963:  log likelihood = 38.27,  aic = -50.54
\end{lstlisting}
}

%\begin{figure}[h!]
% \includegraphics[scale=.35]{5}\\
%  \caption{ The test for the fitness of AR(12) model}
%      \label{fig:time}
% \end{figure}

We also tried the MA(12) model, but unfortunately, this MA(12) model has $aic = 110.58$ and $log likelihood = -42.29$. 
We do not think that it is a good model for predicting this housing price index dataset, and we do not give the representation of it here.

After the AR and MA model, we think the combination of these two will also make sense, so we tried the ARIMA model.
Before we do the simulation, we transform the data into a time series one by using the `ts' commend in RStudio.
The `auto.arima' commend gives us the automatic simulation of these housing price index data on the ARIMA model, and it provides the ARIMA(5,0,4) for the data which has been differentiate for once.
That is equivalent to the result that we would have a ARIMA(5,1,4) for the original data, the data without differentiate.
And the model is: 

\begin{equation}
\begin{aligned}
(1+0.220B+0.05B^2-0.726B^3-0.004B^4+0.163B^5)x_t \\
= a_t +1.728a_{t-1}+2.145a_{t-2}+1.184a_{t-3}+0.429a_{t-4}.
\end{aligned}
\end{equation}

{\footnotesize
\begin{lstlisting}[language=R]
> m4=arima(hpi,order = c(5,1,4))
> m4
Call: 
arima(x = hpi, order = c(5, 1, 4))
Coefficients:
          ar1      ar2     ar3     ar4      ar5     ma1     ma2     ma3
      -0.2191  -0.0476  0.7262  0.0043  -0.1634  1.7278  2.1454  1.1841
s.e.   0.1095   0.0829  0.0678  0.0886   0.0760  0.1066  0.1708  0.1561
         ma4
      0.4289
s.e.  0.0874
sigma^2 estimated as 0.0693:  log likelihood = -44.05,  aic = 108.09
> Box.test(m4$residuals)
	Box-Pierce test
data:  m4$residuals  
X-squared = 0.34351, df = 1, p-value = 0.5578
> pp=1-pchisq(0.34,12)
> pp
[1] 1 
\end{lstlisting}
}

We also have basic analysis of the mortgage rate, see Figure 2. 
The ACF shows a strong serial correlations, and the PACF only significant on 1,2,3.
And we can conclude that the mortgage rate is almost a stationary data.

\begin{figure*}[h!]
\begin{subfigure}[b]{0.4\textwidth}
\begin{center}
 \includegraphics[scale=0.5]{4}
 \vspace{-0.4cm}
\end{center}
\end{subfigure}
\qquad
\qquad
\begin{subfigure}[b]{0.4\textwidth}
\begin{center}
 \includegraphics[scale=0.5]{9}
 \vspace{-0.4cm}
\end{center}
\end{subfigure}
 \vspace{-.1cm}
 \caption{ ACF and PACF of mortgage rate fitted from 1975. Jan to 2016. Sep.}
      \label{fig:time}
\vspace{-.25cm}
\end{figure*}

Here comes the most focused part of our analysis on the relationship about the housing price index and mortgage rate. 
By using the `plot' commend in RStudio, we have a intuitively negative relationship, see the following picture.

\begin{figure}[h!]
\centering
 \includegraphics[scale=.7]{10}\\
\end{figure}



\section{Discussion}

\section{Conclusion}




















\end{document}
